(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[452],{766:function(e,t,s){Promise.resolve().then(s.bind(s,2306))},2306:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return NewTaskPage}});var a=s(7437),n=s(2265),r=s(2749),i=s(4033),l=s(4845);function NewTaskPage(){let{data:e,status:t}=(0,r.useSession)(),s=(0,i.useRouter)();return((0,n.useEffect)(()=>{"unauthenticated"===t&&s.push("/login")},[t,s]),"loading"===t)?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"20px"},children:[(0,a.jsx)("h1",{style:{marginBottom:"20px"},children:"Create New Task"}),(0,a.jsx)(l.default,{})]})}},4845:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return TaskForm}});var a=s(7437),n=s(2265),r=s(4033);function TaskForm(e){let{task:t}=e,[s,i]=(0,n.useState)(""),[l,c]=(0,n.useState)(""),[o,u]=(0,n.useState)("pending"),[d,h]=(0,n.useState)(!1),[m,f]=(0,n.useState)(""),p=(0,r.useRouter)();(0,n.useEffect)(()=>{t&&(i(t.title),c(t.description),u(t.status))},[t]);let handleSubmit=async e=>{if(e.preventDefault(),!s.trim()){f("Title is required");return}if(s.length>100){f("Title must be less than 100 characters");return}if(l.length>500){f("Description must be less than 500 characters");return}h(!0),f("");try{let e=t?"/api/tasks/".concat(t._id):"/api/tasks",a=t?"PUT":"POST",n=await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify({title:s,description:l,status:o})});if(n.ok)p.push("/dashboard"),p.refresh();else{let e=await n.json();f(e.error||"Something went wrong")}}catch(e){f("Network error. Please try again.")}finally{h(!1)}},handleChange=e=>{let{name:t,value:s}=e.target;m&&f(""),"title"===t&&i(s),"description"===t&&c(s),"status"===t&&u(s)};return(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"card",children:[m&&(0,a.jsx)("div",{className:"error-message",children:m}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title *"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:s,onChange:handleChange,required:!0,maxLength:100,className:"form-input ".concat(m&&!s.trim()?"form-input-error":"")}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[s.length,"/100 characters"]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:l,onChange:handleChange,rows:"4",maxLength:500,className:"form-textarea"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[l.length,"/500 characters"]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,a.jsxs)("select",{id:"status",name:"status",value:o,onChange:handleChange,className:"form-select",children:[(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"done",children:"Done"})]})]}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"btn ".concat(d?"btn-secondary":"btn-primary"," w-full"),children:d?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsx)("span",{className:"loading-spinner mr-2"}),"Loading..."]}):t?"Update Task":"Create Task"})]})}},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[749,971,472,744],function(){return e(e.s=766)}),_N_E=e.O()}]);