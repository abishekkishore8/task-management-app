(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{4080:function(e,t,s){Promise.resolve().then(s.bind(s,4845))},4845:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return TaskForm}});var r=s(7437),a=s(2265),n=s(4033);function TaskForm(e){let{task:t}=e,[s,i]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[c,u]=(0,a.useState)("pending"),[d,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),p=(0,n.useRouter)();(0,a.useEffect)(()=>{t&&(i(t.title),o(t.description),u(t.status))},[t]);let handleSubmit=async e=>{if(e.preventDefault(),!s.trim()){f("Title is required");return}if(s.length>100){f("Title must be less than 100 characters");return}if(l.length>500){f("Description must be less than 500 characters");return}m(!0),f("");try{let e=t?"/api/tasks/".concat(t._id):"/api/tasks",r=t?"PUT":"POST",a=await fetch(e,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({title:s,description:l,status:c})});if(a.ok)p.push("/dashboard"),p.refresh();else{let e=await a.json();f(e.error||"Something went wrong")}}catch(e){f("Network error. Please try again.")}finally{m(!1)}},handleChange=e=>{let{name:t,value:s}=e.target;h&&f(""),"title"===t&&i(s),"description"===t&&o(s),"status"===t&&u(s)};return(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"card",children:[h&&(0,r.jsx)("div",{className:"error-message",children:h}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title *"}),(0,r.jsx)("input",{type:"text",id:"title",name:"title",value:s,onChange:handleChange,required:!0,maxLength:100,className:"form-input ".concat(h&&!s.trim()?"form-input-error":"")}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[s.length,"/100 characters"]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,r.jsx)("textarea",{id:"description",name:"description",value:l,onChange:handleChange,rows:"4",maxLength:500,className:"form-textarea"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[l.length,"/500 characters"]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,r.jsxs)("select",{id:"status",name:"status",value:c,onChange:handleChange,className:"form-select",children:[(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"done",children:"Done"})]})]}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"btn ".concat(d?"btn-secondary":"btn-primary"," w-full"),children:d?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)("span",{className:"loading-spinner mr-2"}),"Loading..."]}):t?"Update Task":"Create Task"})]})}},622:function(e,t,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=s(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,s){var r,n={},c=null,u=null;for(r in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!o.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:n,_owner:l.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},7437:function(e,t,s){"use strict";e.exports=s(622)},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=4080)}),_N_E=e.O()}]);