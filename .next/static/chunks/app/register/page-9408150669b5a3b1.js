(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11,626],{9468:function(e,r,t){Promise.resolve().then(t.bind(t,9223))},9223:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return AuthForm}});var i=t(7437),a=t(2265),s=t(4033),d=t(2749);function AuthForm(e){let{mode:r}=e,[t,n]=(0,a.useState)(!1),[o,l]=(0,a.useState)(""),m=(0,s.useRouter)(),handleSubmit=async e=>{e.preventDefault(),n(!0),l("");let t=new FormData(e.target),i=Object.fromEntries(t);if("register"===r)try{let e=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(e.ok)m.push("/login"),m.refresh();else try{let r=await e.json();l(r.error||"Registration failed")}catch(e){l("Registration failed. Please try again.")}}catch(e){console.error("Registration error:",e),l("Network error. Please try again.")}finally{n(!1)}else{let e=await (0,d.signIn)("credentials",{email:i.email,password:i.password,redirect:!1});e.error?(l(e.error),n(!1)):m.push("/dashboard")}};return(0,i.jsxs)("form",{onSubmit:handleSubmit,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[o&&(0,i.jsx)("div",{style:{color:"red",padding:"0.5rem",backgroundColor:"#fee2e2",borderRadius:"0.375rem"},children:o}),"register"===r&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"name",style:{display:"block",marginBottom:"0.5rem"},children:"Name"}),(0,i.jsx)("input",{type:"text",id:"name",name:"name",required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.5rem"},children:"Email"}),(0,i.jsx)("input",{type:"email",id:"email",name:"email",required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.5rem"},children:"Password"}),(0,i.jsx)("input",{type:"password",id:"password",name:"password",required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem"}})]}),(0,i.jsx)("button",{type:"submit",disabled:t,className:"btn btn-primary btn-ripple add-task-btn",style:{width:"100%",marginTop:"1rem",background:t?"#9ca3af":"",cursor:t?"not-allowed":"pointer"},children:t?"Loading...":"register"===r?"Register":"Login"})]})}},4033:function(e,r,t){e.exports=t(94)}},function(e){e.O(0,[749,971,472,744],function(){return e(e.s=9468)}),_N_E=e.O()}]);