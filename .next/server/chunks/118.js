"use strict";exports.id=118,exports.ids=[118],exports.modules={7118:(e,t,s)=>{s.r(t),s.d(t,{default:()=>TaskForm});var a=s(784),r=s(9885),n=s(7114);function TaskForm({task:e}){let[t,s]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),[o,c]=(0,r.useState)("pending"),[d,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)(""),p=(0,n.useRouter)();(0,r.useEffect)(()=>{e&&(s(e.title),i(e.description),c(e.status))},[e]);let handleSubmit=async s=>{if(s.preventDefault(),!t.trim()){u("Title is required");return}if(t.length>100){u("Title must be less than 100 characters");return}if(l.length>500){u("Description must be less than 500 characters");return}m(!0),u("");try{let s=e?`/api/tasks/${e._id}`:"/api/tasks",a=e?"PUT":"POST",r=await fetch(s,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,description:l,status:o})});if(r.ok)p.push("/dashboard"),p.refresh();else{let e=await r.json();u(e.error||"Something went wrong")}}catch(e){u("Network error. Please try again.")}finally{m(!1)}},handleChange=e=>{let{name:t,value:a}=e.target;h&&u(""),"title"===t&&s(a),"description"===t&&i(a),"status"===t&&c(a)};return(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"card",children:[h&&a.jsx("div",{className:"error-message",children:h}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"title",className:"form-label",children:"Title *"}),a.jsx("input",{type:"text",id:"title",name:"title",value:t,onChange:handleChange,required:!0,maxLength:100,className:`form-input ${h&&!t.trim()?"form-input-error":""}`}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[t.length,"/100 characters"]})]}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l,onChange:handleChange,rows:"4",maxLength:500,className:"form-textarea"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[l.length,"/500 characters"]})]}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,a.jsxs)("select",{id:"status",name:"status",value:o,onChange:handleChange,className:"form-select",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"done",children:"Done"})]})]}),a.jsx("button",{type:"submit",disabled:d,className:`btn ${d?"btn-secondary":"btn-primary"} w-full`,children:d?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"loading-spinner mr-2"}),"Loading..."]}):e?"Update Task":"Create Task"})]})}}};